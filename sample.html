
<!DOCTYPE html>
<html>
    <head>
        <title>merry xmas</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />

        <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet" media="screen">
        <script type="text/javascript"
            src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js"><
            script>
        <script type="text/javascript"
            src="bootstrap/js/bootstrap.min.js"></script>   
        <script type="text/javascript"
            src="mathjax-MathJax-24a378e/MathJax.js?config=default"></script>
        <style>
            .container {
                width:1000px;
            }
            input {
            	width:100%;
            	padding:10px;
            }
            .text_input {
                margin:10px;
                margin-top:10px;
            }
            .btn {
            	margin:4px;
            	width:100%;
            }
            .output {
                border: 1px solid black;
                padding: 1em;
                // position: absolute;
                top: 0;
                left: 2em;
            }
            .box {
            	height: 120px;
            }
            .input_panel {
            }
        </style>
    </head>
    <body>

        <script>
            //
            //  Use a closure to hide the local variables from the
            //  global namespace
            //
            (function () {
                var QUEUE = MathJax.Hub.queue;  
                var math = null, box = null;   
                var final_dest = "MathOutput";

                var HIDEBOX = function () {
                    box.style.visibility = "hidden"
                }
                
                var SHOWBOX = function () {
                    box.style.visibility = "visible"
                }

                QUEUE.Push(function () {
                    math = MathJax.Hub.getAllJax(math)[0];
                    if (math != null) {
                        box = document.getElementById("box");
                        SHOWBOX();
                    }
                });

                window.UpdateMath = function (TeX, div) {
                	math = MathJax.Hub.getAllJax(div)[0];
                    QUEUE.Push(HIDEBOX,
                        ["Text",math,"\\displaystyle{"+TeX+"}"],SHOWBOX);
                }
            })();
        </script>

        <div class="container">
        <br/>

        <div class="box row" id="box">
            <div class="button_panel span2">
                <button id="insert_above" class="btn btn-primary">insert line above</button>
                </br>
                <button id="delete" class="btn btn-primary">delete line</button>
                </br>
                <button id="insert_below" class="btn btn-primary">insert line below</button>
            </div>
            <div class="text_input span6">
                <input class="MathInput" size="80" 
                    onchange="UpdateMath(this.value,'MathOutput')"/>
            </div>
            <div id="MathOutput" class="output span4">
                $$ {} $$
            </div>
        </div>

        <br/>
        <br/>
        <div class="box row" id="box">
            <div class="button_panel span2">
                <button id="insert_above" class="btn btn-primary">insert line above</button>
                </br>
                <button id="delete" class="btn btn-primary">delete line</button>
                </br>
                <button id="insert_below" class="btn btn-primary">insert line below</button>
            </div>
            <div class="text_input span6">
                <input class="MathInput" size="80" 
                    onchange="UpdateMath(this.value,'MathOutput2')"/>
            </div>
            <div id="MathOutput2" class="output span4">
                $$ {} $$
            </div>
        </div>

        <br/>
        <br/>


        <div class="box row" id="box">
            <div class="button_panel span2">
                <button id="insert_above" class="btn btn-primary">insert line above</button>
                </br>
                <button id="delete" class="btn btn-primary">delete line</button>
                </br>
                <button id="insert_below" class="btn btn-primary">insert line below</button>
            </div>
            <div class="text_input span6">
                <input class="MathInput" size="80" 
                    onchange="UpdateMath(this.value,'MathOutput3')"/>
            </div>
            <div id="MathOutput3" class="output span4">
                $$ {} $$
            </div>
        </div>

        <br/>
        <br/>

    </div>
        <script>
            if (MathJax.Hub.Browser.isMSIE) {
                MathInput.onkeypress = function() {
                    if (window.event && window.event.keyCode === 13) {
                        this.blur();
                        this.focus()
                    }
                }
            }
        </script>

    </body>
</html>

